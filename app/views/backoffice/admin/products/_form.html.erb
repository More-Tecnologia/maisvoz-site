<%= simple_form_for(form, url: url, method: method, validate: true, html: { class: 'form-horizontal', multipart: true }) do |f| %>

  <ul class="nav nav-tabs tabs">
      <li class="active tab">
          <a href="#info" data-toggle="tab" aria-expanded="false">
              <span class="visible-xs"><i class="fa fa-home"></i></span>
              <span class="hidden-xs"><%= t('views.backoffice.admin.products.basic_info') %></span>
          </a>
      </li>
      <li class="tab">
          <a href="#dimensions" data-toggle="tab" aria-expanded="false">
              <span class="visible-xs"><i class="fa fa-user"></i></span>
              <span class="hidden-xs"><%= t('views.backoffice.admin.products.dimensions') %></span>
          </a>
      </li>
      <li class="tab">
          <a href="#bonus" data-toggle="tab" aria-expanded="false">
              <span class="visible-xs"><i class="fa fa-cog"></i></span>
              <span class="hidden-xs"><%= t('views.backoffice.admin.products.bonus') %></span>
          </a>
      </li>
  </ul>

  <div class="tab-content">
    <%= f.error_notification %>
    <div class="tab-pane active" id="info">
      <div class="row">
        <div class="col-md-6">
          <div class="p-20">

            <% if product && product.main_photo %>
              <%= cl_image_tag(product.main_photo.public_id, class: 'thumb-lg') %>
            <% end %>
            <label for="">Foto Principal</label>
            <%= f.input :main_photo, as: :file %>

            <% product && product.photos.each do |cl| %>
              <%= cl_image_tag(cl.public_id, class: 'thumb-lg') %>
            <% end %>
            <label for="">Galeria de fotos</label>
            <%= f.input :photos, as: :file,  input_html: { multiple: true } %>

            <%= f.input :name %>
            <%= f.input :price do %>
              <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-dollar"></i></span>
                <%= f.input_field :price, class: "form-control", value: form.price.to_f %>
              </div>
            <% end %>
            <%= f.input :description, as: :text %>
            <%= f.input :short_description %>
            <%= f.input :sku %>
            <%= f.input :quantity %>
          </div>
        </div>
        <div class="col-md-6">
          <div class="p-20">
            <%= f.input :low_stock_alert %>
            <%= f.input :category_id, collection: Category.all %>
            <%= f.input :kind, collection: Product.kinds.map { |k,v| [t(k), k] } %>
            <%= f.input :paid_by, collection: Product.paid_bies.map { |k,v| [t(k), k] } %>
            <%= f.input :active, as: :boolean %>
            <%= f.input :virtual, as: :boolean %>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane" id="dimensions">
      <%= f.input :length do %>
        <div class="input-group">
          <%= f.input_field :length, class: "form-control" %>
          <span class="input-group-addon">cm</span>
        </div>
      <% end %>
      <%= f.input :width do %>
        <div class="input-group">
          <%= f.input_field :width, class: "form-control" %>
          <span class="input-group-addon">cm</span>
        </div>
      <% end %>
      <%= f.input :height do %>
        <div class="input-group">
          <%= f.input_field :height, class: "form-control" %>
          <span class="input-group-addon">cm</span>
        </div>
      <% end %>
      <%= f.input :weight do %>
        <div class="input-group">
          <%= f.input_field :weight, class: "form-control" %>
          <span class="input-group-addon">kg</span>
        </div>
      <% end %>
    </div>
    <div class="tab-pane" id="bonus">
      <div class="row">
        <div class="col-md-4">
          <div class="input-group">
            <%= f.input :binary_score %>
          </div>
        </div>
        <div class="col-md-4">
          <div class="input-group">
            <%= f.input :advance_score %>
          </div>
        </div>
        <div class="col-md-4">
          <div class="input-group">
            <%= f.input :binary_bonus %>
          </div>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-12">
          <%= f.input :trail_id, collection: Trail.all, readonly: !form.trail_id.blank? %>
        </div>
        <% unless form.trail_id.blank? %>
        <div class="col-md-12">
          <table class="table table-bordered m-0">
            <thead>
              <tr>
                <th width="1">Geração</th>
              <% Career.qualifying.each do |c| %>
                <th><%= c.name %></th>
              <% end %>
              </tr>
            </thead>
            <tbody>
            <% generation = 1; %>
            <% form.scores.each do |s| %>
              <tr>
                <td class="text-center media-middle"><%= s.generation %></td>
              <% form.careers.each do |ct| %>
                <td><%= ct.career_id %></td>
              <% generation += 1; %>
              <% end %>
              </tr>
            <% end %>
              <tr>
                <td class="text-center media-middle"><%= generation %></td>
              <% Career.qualifying.each do |c| %>
                <td>
                  <%= f.input :product_scores, label: false, input_html: { name: "product_form[product_scores][#{generation}][#{c.id}]", id: "product_form_product_scores_#{generation}_#{c.id}" } %>
                </td>
              <% end %>
              </tr>
            </tbody>
          </table>
        </div>
        <% end %>
      </div>
    </div>
  </div>

  <%= f.button :button, t("defaults.#{method}"), data: { disable_with: "<i class='fa fa-spinner fa-spin'></i> Saving...".html_safe } %>

<% end %>
