if (<%= @user.present? %>) {
  (function toggle(){
    const paymentButton = document.querySelector("#payment-ticket-button");
    if(paymentButton){
      paymentButton.dataset.logged = true;
      publicLoginRegister.closeModalHandler();
      paymentButton.click();
    }
      const mainApp = document.querySelector('.main-app');
      const footer = document.querySelector('.bottom-menu');
      footer.remove();
      const footerHTML = `<%= j render 'layouts/shared/footer' %>`;      
      mainApp.insertAdjacentHTML('beforeend', footerHTML);

      const header = document.querySelector('header'); 
      header.remove();
      const headerHTML = `<%= j render 'layouts/top_bar' %>`;          
      mainApp.insertAdjacentHTML('afterbegin', headerHTML);

      publicLoginRegister.closeModalHandler();
    })();
  
} else {
    const toggle = () => {
    const elem = document.querySelector("#error-msg");
    elem.innerHTML = '';
    elem.insertAdjacentHTML('afterbegin', "<div class='alert alert-danger alert-dismissible'><%= @error %><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>");
  }
  toggle();
}
